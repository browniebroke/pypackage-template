{#
    This changelog template controls which changelog creation occurs
    based on which mode is provided.

    Modes:
        - init: Initialize a full changelog from scratch
        - update: Insert new version details where the placeholder exists in the current changelog

#}{%  set this_file = "CHANGELOG.md"
%}{%  set insertion_flag = ctx.changelog_insertion_flag
%}{%  set unreleased_commits = ctx.history.unreleased | dictsort
%}{%  set releases = ctx.history.released.values() | list
%}{%  set hvcs_type = ctx.hvcs_type
%}{#
#}{%  if ctx.changelog_mode == "update"
%}{#    # this file's destination file will match the file we want
   #    # to maintain and update in the future
#}{%    set prev_changelog_file = this_file
%}{#
#}{%    set new_releases = []
%}{%    if releases | length > 0
%}{%      set new_releases = [releases | first]
%}{%    endif
%}{#
#}{%    include ".components/changelog_update.md.j2"
%}{#
#}{%  elif ctx.changelog_mode == "init"
%}{{    "# CHANGELOG\n"
}}{%    include ".components/changelog_init.md.j2"
%}{#
#}{%  endif
%}
